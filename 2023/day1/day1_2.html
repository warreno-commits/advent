<!DOCTYPE html>
<html>

<head>
    <title>Read Text File</title>
</head>

<body>
    <input type="file" name="inputfile" id="inputfile">
    <br>

    <pre id="output"></pre>

    <script type="text/javascript">

    const stringNums = ["one", "1", "two", "2", "three", "3",
    "four", "4", "five", "5", "six", "6", "seven", "7", "eight", "8"
    , "nine", "9"]

    function firstDigit(num) {
    ind = 999
    firstNum = "blank"
    for (let i = 0; i < stringNums.length; i++){
    const check = stringNums[i]
    const rank = num.indexOf(check)
    if (rank < ind && rank >= 0 ) {
    ind = rank
    firstNum = check
    }
    }
    if (firstNum == "one") {
    return "1" } else if (firstNum == "two") {
    return "2"} else if (firstNum == "three") {
    return "3"} else if (firstNum == "four") {
    return "4"} else if (firstNum == "five") {
    return "5"} else if (firstNum == "six") {
    return "6"} else if (firstNum == "seven") {
    return "7"} else if (firstNum == "eight") {
    return "8"} else if (firstNum == "nine") {
    return "9"} else { return firstNum }
}

    function lastDigit(num) {
    ind = 0
    lastNum = "blank"
    for (let i = 0; i < stringNums.length; i++){
    const check = stringNums[i]
    const rank = num.lastIndexOf(check)
    if (rank >= ind && rank >= 0 ) {
    ind = rank
    lastNum = check
    }
    }
    if (lastNum == "one") {
    return "1" } else if (lastNum == "two") {
    return "2"} else if (lastNum == "three") {
    return "3"} else if (lastNum == "four") {
    return "4"} else if (lastNum == "five") {
    return "5"} else if (lastNum == "six") {
    return "6"} else if (lastNum == "seven") {
    return "7"} else if (lastNum == "eight") {
    return "8"} else if (lastNum == "nine") {
    return "9"} else { return lastNum }
}
        document.getElementById('inputfile')
            .addEventListener('change', function () {

                let fr = new FileReader();
                fr.onload = function () {
                    const itemList = fr.result.split(/\r?\n/);
                    let runningSum = 0

                    for (let i = 0 ; i < itemList.length; i++) {
                    const sum = Number("" + firstDigit(itemList[i]) + lastDigit(itemList[i]))
                    console.log(itemList[i]
                    + " First Digit: " + firstDigit(itemList[i])
                    + " Last Digit: " + lastDigit(itemList[i])
                    + " Total: " + sum )
                    runningSum = runningSum + sum
                    console.log("Running Total:" + runningSum)
                    }
                }

                fr.readAsText(this.files[0]);
            })
    </script>
</body>

</html>